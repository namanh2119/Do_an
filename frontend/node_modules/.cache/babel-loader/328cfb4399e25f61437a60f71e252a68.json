{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"E:\\\\Code\\\\DoAn\\\\frontend\\\\src\\\\components\\\\admin\\\\UpdateProduct.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useState, useEffect } from 'react';\nimport MetaData from '../layout/MetaData';\nimport Sidebar from './Sidebar';\nimport { useAlert } from 'react-alert';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { updateProduct, getProductDetails, clearErrors } from '../../actions/productActions';\nimport { UPDATE_PRODUCT_RESET } from '../../constants/productConstants';\n\nconst UpdateProduct = ({\n  match,\n  history\n}) => {\n  _s();\n\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState(0);\n  const [description, setDescription] = useState('');\n  const [category, setCategory] = useState('');\n  const [stock, setStock] = useState(0);\n  const [seller, setSeller] = useState('');\n  const [images, setImages] = useState([]);\n  const [oldImages, setOldImages] = useState([]);\n  const [imagesPreview, setImagesPreview] = useState([]);\n  const categories = ['Chọn mục lưu trữ', 'Rau-Củ-Trái cây', 'Thịt-Trứng-Hải sản', 'Thực phẩm chế biến', 'Thực phẩm đông lạnh', 'Thực phẩm Khô - Gia Vị', 'Bánh kẹo - Đồ ăn vặt', \"Sữa - Sản phẩm từ sữa\", 'Đồ uống - Giải khát', 'Hóa Mỹ phẩm', 'Chăm sóc cá nhân', 'Chăm sóc mẹ và bé', 'Thể thao'];\n  const alert = useAlert();\n  const dispatch = useDispatch();\n  const {\n    error,\n    product\n  } = useSelector(state => state.productDetails);\n  const {\n    loading,\n    error: updateError,\n    isUpdated\n  } = useSelector(state => state.product);\n  const productId = match.params.id;\n  useEffect(() => {\n    if (product && product._id !== productId) {\n      dispatch(getProductDetails(productId));\n    } else {\n      setName(product.name);\n      setPrice(product.price);\n      setDescription(product.description);\n      setCategory(product.category);\n      setSeller(product.seller);\n      setStock(product.stock);\n      setOldImages(product.images);\n    }\n\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (updateError) {\n      alert.error(updateError);\n      dispatch(clearErrors());\n    }\n\n    if (isUpdated) {\n      history.push('/admin/products');\n      alert.success('Product updated successfully');\n      dispatch({\n        type: UPDATE_PRODUCT_RESET\n      });\n    }\n  }, [dispatch, alert, error, isUpdated, history, updateError, product, productId]);\n\n  const submitHandler = e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.set('name', name);\n    formData.set('price', price);\n    formData.set('description', description);\n    formData.set('category', category);\n    formData.set('stock', stock);\n    formData.set('seller', seller);\n    images.forEach(image => {\n      formData.append('images', image);\n    });\n    dispatch(updateProduct(product._id, formData));\n  };\n\n  const onChange = e => {\n    const files = Array.from(e.target.files);\n    setImagesPreview([]);\n    setImages([]);\n    setOldImages([]);\n    files.forEach(file => {\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        if (reader.readyState === 2) {\n          setImagesPreview(oldArray => [...oldArray, reader.result]);\n          setImages(oldArray => [...oldArray, reader.result]);\n        }\n      };\n\n      reader.readAsDataURL(file);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(MetaData, {\n      title: 'Update Product'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-md-2\",\n        children: /*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-md-10\",\n        children: /*#__PURE__*/_jsxDEV(Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"wrapper my-5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"from-new\",\n              children: /*#__PURE__*/_jsxDEV(\"form\", {\n                className: \"shadow-lg\",\n                onSubmit: submitHandler,\n                encType: \"multipart/form-data\",\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"mb-4\",\n                  children: \"C\\u1EADp nh\\u1EADt s\\u1EA3n ph\\u1EA9m\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"name_field\",\n                    children: \"T\\xEAn s\\u1EA3n ph\\u1EA9m\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    id: \"name_field\",\n                    className: \"form-control\",\n                    value: name,\n                    onChange: e => setName(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 140,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"price_field\",\n                    children: \"Gi\\xE1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    id: \"price_field\",\n                    className: \"form-control\",\n                    value: price,\n                    onChange: e => setPrice(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"description_field\",\n                    children: \"M\\xF4 t\\u1EA3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    className: \"form-control\",\n                    id: \"description_field\",\n                    rows: \"8\",\n                    value: description,\n                    onChange: e => setDescription(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"category_field\",\n                    children: \"Danh m\\u1EE5c\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    className: \"form-control\",\n                    id: \"category_field\",\n                    value: category,\n                    onChange: e => setCategory(e.target.value),\n                    children: categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: category,\n                      children: category\n                    }, category, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 49\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"stock_field\",\n                    children: \"S\\u1ED1 l\\u01B0\\u1EE3ng\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    id: \"stock_field\",\n                    className: \"form-control\",\n                    value: stock,\n                    onChange: e => setStock(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"seller_field\",\n                    children: \"Xu\\u1EA5t x\\u1EE9\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    id: \"seller_field\",\n                    className: \"form-control\",\n                    value: seller,\n                    onChange: e => setSeller(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"\\u1EA2nh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"custom-file\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"file\",\n                      name: \"product_images\",\n                      className: \"custom-file-input\",\n                      id: \"customFile\",\n                      onChange: onChange,\n                      multiple: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 200,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"custom-file-label\",\n                      htmlFor: \"customFile\",\n                      children: \"Ch\\u1ECDn h\\xECnh\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 208,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 41\n                  }, this), oldImages && oldImages.map(img => /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: img.url,\n                    alt: img.url,\n                    className: \"mt-3 mr-2\",\n                    width: \"55\",\n                    height: \"52\"\n                  }, img, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 45\n                  }, this)), imagesPreview.map(img => /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: img,\n                    alt: \"Images Preview\",\n                    className: \"mt-3 mr-2\",\n                    width: \"55\",\n                    height: \"52\"\n                  }, img, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 218,\n                    columnNumber: 45\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  id: \"login_button\",\n                  type: \"submit\",\n                  className: \"btn btn-block py-3\",\n                  disabled: loading ? true : false,\n                  children: \"C\\u1EADp nh\\u1EADt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UpdateProduct, \"GJILR3Hb2mHNnAdl2KkTLyCZykE=\", false, function () {\n  return [useAlert, useDispatch, useSelector, useSelector];\n});\n\n_c = UpdateProduct;\nexport default UpdateProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"UpdateProduct\");","map":{"version":3,"sources":["E:/Code/DoAn/frontend/src/components/admin/UpdateProduct.js"],"names":["React","Fragment","useState","useEffect","MetaData","Sidebar","useAlert","useDispatch","useSelector","updateProduct","getProductDetails","clearErrors","UPDATE_PRODUCT_RESET","UpdateProduct","match","history","name","setName","price","setPrice","description","setDescription","category","setCategory","stock","setStock","seller","setSeller","images","setImages","oldImages","setOldImages","imagesPreview","setImagesPreview","categories","alert","dispatch","error","product","state","productDetails","loading","updateError","isUpdated","productId","params","id","_id","push","success","type","submitHandler","e","preventDefault","formData","FormData","set","forEach","image","append","onChange","files","Array","from","target","file","reader","FileReader","onload","readyState","oldArray","result","readAsDataURL","value","map","img","url"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\n\nimport MetaData from '../layout/MetaData'\nimport Sidebar from './Sidebar'\n\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { updateProduct, getProductDetails, clearErrors } from '../../actions/productActions'\nimport { UPDATE_PRODUCT_RESET } from '../../constants/productConstants'\n\nconst UpdateProduct = ({ match, history }) => {\n\n    const [name, setName] = useState('');\n    const [price, setPrice] = useState(0);\n    const [description, setDescription] = useState('');\n    const [category, setCategory] = useState('');\n    const [stock, setStock] = useState(0);\n    const [seller, setSeller] = useState('');\n    const [images, setImages] = useState([]);\n\n    const [oldImages, setOldImages] = useState([]);\n    const [imagesPreview, setImagesPreview] = useState([])\n\n    const categories = [\n        'Chọn mục lưu trữ',\n        'Rau-Củ-Trái cây',\n        'Thịt-Trứng-Hải sản',\n        'Thực phẩm chế biến',\n        'Thực phẩm đông lạnh',\n        'Thực phẩm Khô - Gia Vị',\n        'Bánh kẹo - Đồ ăn vặt',\n        \"Sữa - Sản phẩm từ sữa\",\n        'Đồ uống - Giải khát',\n        'Hóa Mỹ phẩm',\n        'Chăm sóc cá nhân',\n        'Chăm sóc mẹ và bé',\n        'Thể thao'\n    ]\n\n    const alert = useAlert();\n    const dispatch = useDispatch();\n\n    const { error, product } = useSelector(state => state.productDetails)\n    const { loading, error: updateError, isUpdated } = useSelector(state => state.product);\n\n    const productId = match.params.id;\n\n    useEffect(() => {\n\n        if (product && product._id !== productId) {\n            dispatch(getProductDetails(productId));\n        } else {\n            setName(product.name);\n            setPrice(product.price);\n            setDescription(product.description);\n            setCategory(product.category);\n            setSeller(product.seller);\n            setStock(product.stock)\n            setOldImages(product.images)\n        }\n\n        if (error) {\n            alert.error(error);\n            dispatch(clearErrors())\n        }\n\n        if (updateError) {\n            alert.error(updateError);\n            dispatch(clearErrors())\n        }\n\n\n        if (isUpdated) {\n            history.push('/admin/products');\n            alert.success('Product updated successfully');\n            dispatch({ type: UPDATE_PRODUCT_RESET })\n        }\n\n    }, [dispatch, alert, error, isUpdated, history, updateError, product, productId])\n\n\n    const submitHandler = (e) => {\n        e.preventDefault();\n\n        const formData = new FormData();\n        formData.set('name', name);\n        formData.set('price', price);\n        formData.set('description', description);\n        formData.set('category', category);\n        formData.set('stock', stock);\n        formData.set('seller', seller);\n\n        images.forEach(image => {\n            formData.append('images', image)\n        })\n\n        dispatch(updateProduct(product._id, formData))\n    }\n\n    const onChange = e => {\n\n        const files = Array.from(e.target.files)\n\n        setImagesPreview([]);\n        setImages([])\n        setOldImages([])\n\n        files.forEach(file => {\n            const reader = new FileReader();\n\n            reader.onload = () => {\n                if (reader.readyState === 2) {\n                    setImagesPreview(oldArray => [...oldArray, reader.result])\n                    setImages(oldArray => [...oldArray, reader.result])\n                }\n            }\n\n            reader.readAsDataURL(file)\n        })\n    }\n\n\n    return (\n        <Fragment>\n            <MetaData title={'Update Product'} />\n            <div className=\"row\">\n                <div className=\"col-12 col-md-2\">\n                    <Sidebar />\n                </div>\n\n                <div className=\"col-12 col-md-10\">\n                    <Fragment>\n                        <div className=\"wrapper my-5\">\n                            <div className='from-new'>\n                                <form className=\"shadow-lg\" onSubmit={submitHandler} encType='multipart/form-data'>\n                                    <h1 className=\"mb-4\">Cập nhật sản phẩm</h1>\n    \n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"name_field\">Tên sản phẩm</label>\n                                        <input\n                                            type=\"text\"\n                                            id=\"name_field\"\n                                            className=\"form-control\"\n                                            value={name}\n                                            onChange={(e) => setName(e.target.value)}\n                                        />\n                                    </div>\n    \n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"price_field\">Giá</label>\n                                        <input\n                                            type=\"text\"\n                                            id=\"price_field\"\n                                            className=\"form-control\"\n                                            value={price}\n                                            onChange={(e) => setPrice(e.target.value)}\n                                        />\n                                    </div>\n    \n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"description_field\">Mô tả</label>\n                                        <textarea className=\"form-control\" id=\"description_field\" rows=\"8\" value={description} onChange={(e) => setDescription(e.target.value)}></textarea>\n                                    </div>\n    \n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"category_field\">Danh mục</label>\n                                        <select className=\"form-control\" id=\"category_field\" value={category} onChange={(e) => setCategory(e.target.value)}>\n                                            {categories.map(category => (\n                                                <option key={category} value={category} >{category}</option>\n                                            ))}\n    \n                                        </select>\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"stock_field\">Số lượng</label>\n                                        <input\n                                            type=\"number\"\n                                            id=\"stock_field\"\n                                            className=\"form-control\"\n                                            value={stock}\n                                            onChange={(e) => setStock(e.target.value)}\n                                        />\n                                    </div>\n    \n                                    <div className=\"form-group\">\n                                        <label htmlFor=\"seller_field\">Xuất xứ</label>\n                                        <input\n                                            type=\"text\"\n                                            id=\"seller_field\"\n                                            className=\"form-control\"\n                                            value={seller}\n                                            onChange={(e) => setSeller(e.target.value)}\n                                        />\n                                    </div>\n    \n                                    <div className='form-group'>\n                                        <label>Ảnh</label>\n    \n                                        <div className='custom-file'>\n                                            <input\n                                                type='file'\n                                                name='product_images'\n                                                className='custom-file-input'\n                                                id='customFile'\n                                                onChange={onChange}\n                                                multiple\n                                            />\n                                            <label className='custom-file-label' htmlFor='customFile'>\n                                                Chọn hình\n                                     </label>\n                                        </div>\n    \n                                        {oldImages && oldImages.map(img => (\n                                            <img key={img} src={img.url} alt={img.url} className=\"mt-3 mr-2\" width=\"55\" height=\"52\" />\n                                        ))}\n    \n                                        {imagesPreview.map(img => (\n                                            <img src={img} key={img} alt=\"Images Preview\" className=\"mt-3 mr-2\" width=\"55\" height=\"52\" />\n                                        ))}\n    \n                                    </div>\n    \n    \n                                    <button\n                                        id=\"login_button\"\n                                        type=\"submit\"\n                                        className=\"btn btn-block py-3\"\n                                        disabled={loading ? true : false}\n                                    >\n                                        Cập nhật\n                                </button>\n    \n                                </form>\n                            </div>\n                        </div>\n                    </Fragment>\n                </div>\n            </div>\n\n        </Fragment>\n    )\n}\n\nexport default UpdateProduct\n"]},"metadata":{},"sourceType":"module"}